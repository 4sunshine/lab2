<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Work assessment system</title>
    <script src ="/cli.js"></script>

    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> -->
</head>

<body>
<!-- <div class="container"> -->
    <hr>
    <h1>Система оценки работ</h1>
    <hr>

    <iframe allowtransparency="true" name="status" id="status"\
            style="display: block; border: none"\
            width="100%" height="30px" scrolling="no" onload="clearFrame(this)" ></iframe>

    <!-- отклик сервера отображается в iframe : name="status" -->
    <form id="uploader" enctype="multipart/form-data" method="POST" action="/uploaded" target="status">
        <h3>Загрузка работ</h3>
        <p>
            <input name="workfile" type="file" />
            <input type="submit" value="Отправить"/>
        </p>
    </form>

    <form id="assessment">
        <h3 id="wh">Оценка работ</h3>
        <button id="wb" type="button" onclick="requestForFilenames()">Взять на оценку</button>
    </form>

    <form id="task" style="visibility: hidden">

        <!-- data-fileid - дополнительный аттрибут для хранения Fileid из таблицы Workfiles -->

        <p><a id="work0" target="workwindow" data-fileid="" href="" onclick="SetCurrentFileid(this)"></a></p>
        <p><a id="work1" target="workwindow" data-fileid="" href="" onclick="SetCurrentFileid(this)"></a></p>
        <p><a id="work2" target="workwindow" data-fileid="" href="" onclick="SetCurrentFileid(this)"></a></p>
        <p>
            <button id = "allmarksbutton"\
                    onclick="showMarks()" type="button" disabled>Показать оценки и комментарии</button>
            <button id = "markbutton"\
                    onclick="javascript: showElement(document.getElementById('markform')); disable(this);"\
                    type="button" disabled>Оценить работу</button>
        </p>
        <iframe id="workframe" name="workwindow" width="100%" height="90%"></iframe>

    </form>

    <form id="markform" style="display: none" style="visibility: hidden" method="POST"\
          action="/mark" target="status"> <!-- onsubmit="hideElement(this);"> -->

        <!-- скрытые поля input для передачи имени файла и его идентификатора -->
        <p><input id="fileid" name="fileid" type="hidden"></p>

        <p><label for="mark">Оцените выбранную работу от 1 до 5</label></p>

        <p><input required id="mark" type="number" name="mark" step="1" max="5" min="1"></p>

        <p><label for="comment">Введите комментарий к оценке</label></p>

        <p>
            <textarea required id="comment" name="comment" cols="30" rows="6" type="text" maxlength="500"></textarea>
        </p>

        <p><input type="submit" value="Отправить оценку!"></p>
    </form>

</body>

</html>